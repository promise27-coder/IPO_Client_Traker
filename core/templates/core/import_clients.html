{% extends 'core/base.html' %}
{% block content %}
<div class="max-w-2xl mx-auto mt-10">
    <div class="flex justify-between items-center mb-6">
        <div>
            <h2 class="text-2xl font-bold text-green-400">âœ… Select Applicants</h2>
            <p class="text-gray-400">For IPO: <span class="text-white font-bold">{{ ipo.name }}</span></p>
        </div>
        <a href="{% url 'dashboard' %}" class="text-sm bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded border border-gray-600">
            &larr; Back to Dashboard
        </a>
    </div>

    <form method="POST">
        {% csrf_token %}
        <div class="bg-gray-800 rounded shadow border border-gray-700 max-h-[60vh] overflow-y-auto mb-6">
            {% for master in masters %}
            <div class="flex items-center p-4 border-b border-gray-700 hover:bg-gray-700 cursor-pointer transition">
                <input type="checkbox" name="master_ids" value="{{ master.id }}" id="m_{{ master.id }}" class="w-5 h-5 accent-green-500 mr-4 cursor-pointer">
                <label for="m_{{ master.id }}" class="flex-1 cursor-pointer">
                    <div class="font-bold text-lg text-white">{{ master.nickname }}</div>
                    <div class="text-xs text-gray-400 font-mono">{{ master.broker }} {% if master.pan_number %}| {{ master.pan_number }}{% endif %}</div>
                </label>
            </div>
            {% empty %}
            <div class="p-10 text-center text-gray-500">
                <p class="mb-2">No new clients found in Master List.</p>
                <a href="{% url 'dashboard' %}" class="text-blue-400 underline hover:text-blue-300">
                    Go to Dashboard to Add New People
                </a>
            </div>
            {% endfor %}
        </div>

        {% if masters %}
        <div class="flex gap-4">
            <button type="submit" class="w-full bg-green-600 hover:bg-green-700 py-3 rounded font-bold text-white text-lg shadow-lg transition transform hover:scale-[1.01]">
                Confirm Selection
            </button>
        </div>
        {% endif %}
    </form>
</div>
{% endblock %}